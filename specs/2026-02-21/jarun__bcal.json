{
  "schema_version": 2,
  "meta": {
    "run_id": "20260221T043920Z",
    "generated_at": "2026-02-21T04:39:20.931Z",
    "source_repo": {
      "full_name": "jarun/bcal",
      "url": "https://github.com/jarun/bcal"
    },
    "topics": [
      "calculator",
      "cli",
      "command-line",
      "console",
      "developer-tools",
      "expression-evaluator",
      "mathematics",
      "standalone",
      "storage",
      "storage-unit-converter",
      "terminal",
      "unit-conversion"
    ]
  },
  "app": {
    "name": "bcal",
    "inspired_by": null,
    "one_liner": "A REPL CLI utility for storage expression evaluation, SI/IEC conversion, byte address calculation, base conversion and LBA/CHS calculation."
  },
  "core_loop": "User enters arithmetic or bitwise expressions involving storage units in a REPL prompt; bcal evaluates them, stores the last result for reuse, and supports general-purpose calculations including functions like exp, log, pow, and root.",
  "screens": [
    {
      "id": "main",
      "name": "REPL Prompt",
      "purpose": "Primary interface for entering and evaluating storage and arithmetic expressions.",
      "primary_actions": [
        "Enter expression with storage units",
        "Switch to general-purpose calculation mode",
        "Convert between SI/IEC units",
        "Show bit positions of a number",
        "Perform base conversion"
      ]
    }
  ],
  "rust_commands": [
    {
      "name": "quit",
      "purpose": "Exit the REPL session cleanly.",
      "async": false,
      "input": {},
      "output": {}
    },
    {
      "name": "exit",
      "purpose": "Exit the REPL session cleanly (alias for quit).",
      "async": false,
      "input": {},
      "output": {}
    },
    {
      "name": "toggle_calc_mode",
      "purpose": "Switch between storage unit evaluation and general-purpose calculation mode.",
      "async": false,
      "input": {},
      "output": {}
    },
    {
      "name": "show_bit_positions",
      "purpose": "Display bit positions with their values for a given number.",
      "async": false,
      "input": {},
      "output": {}
    }
  ],
  "data_model": {
    "tables": [
      {
        "name": "last_result",
        "columns": [
          {
            "name": "value",
            "type": "f64"
          },
          {
            "name": "unit",
            "type": "string"
          }
        ]
      },
      {
        "name": "history",
        "columns": [
          {
            "name": "expression",
            "type": "string"
          },
          {
            "name": "result",
            "type": "string"
          }
        ]
      }
    ]
  },
  "tauri_capabilities": [],
  "mvp_plan": [
    "week 1: Implement REPL loop with expression parsing",
    "week 1: Add support for SI/IEC storage unit conversion",
    "week 1: Integrate basic arithmetic and bitwise operations",
    "week 1: Store and reuse last valid result",
    "week 1: Support base conversion (binary, decimal, hex)"
  ],
  "acceptance_tests": [
    "User can enter 'quit' or 'exit' to terminate the program without error.",
    "General-purpose calculations work without dependency on external tools like bc or calc.",
    "Bitwise operations (AND, OR, XOR, shifts) produce correct results.",
    "Storage expressions like '(2GiB * 2) / (2KiB >> 2)' evaluate correctly.",
    "Program handles undefined input without breaking the terminal."
  ],
  "open_questions": [
    "Should the application support 32-bit systems despite current 64-bit limitation?",
    "How to handle localization of numeric formatting (e.g., commas)?",
    "Is persistent history across sessions required?"
  ],
  "scores": {
    "closure": 3,
    "feasibility": 3,
    "stack_fit": 3,
    "complexity_control": 3,
    "debuggability": 3,
    "demo_value": 3
  },
  "overall_recommendation": "go",
  "citations": {
    "app": [
      "E-RD-003"
    ],
    "core_loop": [
      "E-RD-006"
    ],
    "screens": {
      "main": [
        "E-RD-003"
      ]
    },
    "commands": {
      "quit": [
        "E-IS-001"
      ],
      "exit": [
        "E-IS-001"
      ],
      "toggle_calc_mode": [
        "E-RL-001"
      ],
      "show_bit_positions": [
        "E-RD-006"
      ]
    },
    "tables": {
      "last_result": [
        "E-RD-006"
      ],
      "history": [
        "E-RD-007"
      ]
    },
    "acceptance_tests": {
      "0": [
        "E-IS-001"
      ],
      "1": [
        "E-RL-001"
      ],
      "2": [
        "E-RD-006"
      ],
      "3": [
        "E-RD-003"
      ],
      "4": [
        "E-RL-003"
      ]
    }
  }
}
