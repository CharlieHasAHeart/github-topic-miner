{
  "schema_version": 2,
  "meta": {
    "run_id": "20260219T045551Z",
    "generated_at": "2026-02-19T04:55:51.049Z",
    "source_repo": {
      "full_name": "can1357/oh-my-pi",
      "url": "https://github.com/can1357/oh-my-pi"
    },
    "topics": [
      "ai-agent",
      "ai-coding-agent",
      "anthropic",
      "bun",
      "claude",
      "cli",
      "coding-assistant",
      "llm",
      "mcp",
      "multi-provider",
      "openai",
      "rust",
      "terminal",
      "tui",
      "typescript"
    ]
  },
  "app": {
    "name": "Oh My Pi",
    "inspired_by": null,
    "one_liner": "AI Coding agent for the terminal with hash-anchored edits, optimized tool harness, LSP, Python, browser, subagents, and more."
  },
  "core_loop": "User interacts with an AI coding agent in the terminal through natural language commands, slash commands, or TUI actions; the agent executes tasks using built-in tools (e.g., git inspection, file I/O, shell), streams real-time output including rich media like Mermaid diagrams, and manages sessions with context compaction and branching.",
  "screens": [
    {
      "id": "main",
      "name": "Main Terminal Interface",
      "purpose": "Primary interaction surface for conversing with the AI agent, issuing commands, viewing streaming output, and managing sessions.",
      "primary_actions": [
        "Send message",
        "Use slash commands",
        "View session history",
        "Branch conversation"
      ]
    },
    {
      "id": "settings",
      "name": "Settings Configuration",
      "purpose": "Configure API keys, models, providers, themes, custom system prompts, and agent modules.",
      "primary_actions": [
        "Set API keys",
        "Select model/provider",
        "Load custom modules",
        "Edit system prompt"
      ]
    }
  ],
  "rust_commands": [
    {
      "name": "save_item",
      "purpose": "Persistently store an item such as a session, configuration, or generated artifact.",
      "async": true,
      "input": {},
      "output": {}
    },
    {
      "name": "list_items",
      "purpose": "Retrieve a list of stored items like sessions or configurations.",
      "async": true,
      "input": {},
      "output": {}
    },
    {
      "name": "execute_tool_call",
      "purpose": "Invoke a registered tool (e.g., git-overview, file I/O, shell) based on agent request.",
      "async": true,
      "input": {},
      "output": {}
    }
  ],
  "data_model": {
    "tables": [
      {
        "name": "sessions",
        "columns": [
          {
            "name": "id",
            "type": "string"
          },
          {
            "name": "context",
            "type": "json"
          },
          {
            "name": "created_at",
            "type": "timestamp"
          }
        ]
      },
      {
        "name": "configurations",
        "columns": [
          {
            "name": "key",
            "type": "string"
          },
          {
            "name": "value",
            "type": "json"
          }
        ]
      }
    ]
  },
  "tauri_capabilities": [],
  "mvp_plan": [
    "week 1: Implement core TUI loop with message input/output",
    "week 1: Integrate basic slash command parser",
    "week 1: Add session persistence",
    "week 1: Connect to default LLM provider"
  ],
  "acceptance_tests": [
    "User can send a message and receive streaming output including text and rendered Mermaid diagrams without crash.",
    "Ctrl+C properly terminates long-running agent responses without hanging.",
    "Custom slash commands are parsed and executed via registered Rust handlers.",
    "Session state is preserved across restarts and supports branching."
  ],
  "open_questions": [
    "How to handle concurrent tool calls safely?",
    "What is the optimal strategy for context compaction in long sessions?",
    "Should shared kernel gateway be enabled by default?"
  ],
  "scores": {
    "closure": 3,
    "feasibility": 3,
    "stack_fit": 3,
    "complexity_control": 3,
    "debuggability": 3,
    "demo_value": 3
  },
  "overall_recommendation": "go",
  "citations": {
    "app": [
      "E-RD-001",
      "E-RD-002",
      "E-RD-003"
    ],
    "core_loop": [
      "E-RD-004",
      "E-RD-005",
      "E-RD-007"
    ],
    "screens": {
      "main": [
        "E-RD-001",
        "E-RD-006",
        "E-RD-008"
      ],
      "settings": [
        "E-IS-003",
        "E-RD-004"
      ]
    },
    "commands": {
      "save_item": [
        "E-IS-001",
        "E-IS-005"
      ],
      "list_items": [
        "E-RL-001",
        "E-RL-002"
      ],
      "execute_tool_call": [
        "E-RD-005",
        "E-RD-007"
      ]
    },
    "tables": {
      "sessions": [
        "E-RD-004",
        "E-RD-005"
      ],
      "configurations": [
        "E-RD-004",
        "E-RD-007"
      ]
    },
    "acceptance_tests": {
      "0": [
        "E-IS-001",
        "E-RD-007"
      ],
      "1": [
        "E-IS-001"
      ],
      "2": [
        "E-RD-004",
        "E-RF-001"
      ],
      "3": [
        "E-RD-004",
        "E-RD-005"
      ]
    }
  }
}
